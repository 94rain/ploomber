meta:
  infer_upstream: False
  extract_product: False

config:
  clients:
    PostgresRelation: config.get_pg_uri
    SQLiteRelation: config.get_uri


tasks:
  - class: SQLScript
    name: load-pg
    client: config.get_pg_uri
    source: load.sql
    product: [raw, table]
    product_class: PostgresRelation

  - class: SQLScript
    name: load-lite
    client: config.get_uri
    source: load.sql
    product: [raw, table]
    product_class: SQLiteRelation

  - class: SQLScript
    name: load-lite-generic
    client: config.get_uri
    source: load.sql
    product: [raw_generic, table]
    product_class: GenericSQLRelation
    product_client: config.get_metadata_uri
